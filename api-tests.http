### WhatsApp Business Platform API Tests
### Use REST Client extension in VS Code to run these
### https://marketplace.visualstudio.com/items?itemName=humao.rest-client

@baseUrl = http://localhost:5000/api
@accessToken = 
@chatJid = 

### 1. Health Check
GET {{baseUrl}}/health

### 2. Register User
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "Test1234",
  "name": "Test User"
}

### 3. Login User
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "Test1234"
}

### 4. Get Current User (Protected)
GET {{baseUrl}}/auth/me
Authorization: Bearer {{accessToken}}

### 5. Update Profile
PUT {{baseUrl}}/auth/profile
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Test User Updated"
}

### 6. Change Password
PUT {{baseUrl}}/auth/password
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "currentPassword": "Test1234",
  "newPassword": "NewPass1234"
}

### 7. WhatsApp - Connect
POST {{baseUrl}}/whatsapp/connect
Authorization: Bearer {{accessToken}}

### 8. WhatsApp - Get QR Code
GET {{baseUrl}}/whatsapp/qr
Authorization: Bearer {{accessToken}}

### 9. WhatsApp - Get Status
GET {{baseUrl}}/whatsapp/status
Authorization: Bearer {{accessToken}}

### 10. WhatsApp - Get Phone Info
GET {{baseUrl}}/whatsapp/phone-info
Authorization: Bearer {{accessToken}}

### 11. WhatsApp - Disconnect
POST {{baseUrl}}/whatsapp/disconnect
Authorization: Bearer {{accessToken}}

### 12. Messages - Get All Chats
GET {{baseUrl}}/messages/
Authorization: Bearer {{accessToken}}

### 13. Messages - Get Chat Messages
GET {{baseUrl}}/messages/{{chatJid}}?page=1&limit=50
Authorization: Bearer {{accessToken}}

### 14. Messages - Send Text Message
POST {{baseUrl}}/messages/send
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "chatJid": "1234567890@s.whatsapp.net",
  "type": "text",
  "content": {
    "text": "Hello from API!"
  }
}

### 15. Messages - Mark as Read
POST {{baseUrl}}/messages/mark-read
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "chatJid": "1234567890@s.whatsapp.net"
}

### 16. Messages - Get Unread Count
GET {{baseUrl}}/messages/unread
Authorization: Bearer {{accessToken}}

### 17. Messages - React to Message
POST {{baseUrl}}/messages/MESSAGE_ID/react
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "emoji": "üëç"
}

### 18. Messages - Edit Message
PUT {{baseUrl}}/messages/MESSAGE_ID/edit
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "text": "Edited message text"
}

### 19. Messages - Delete Message
DELETE {{baseUrl}}/messages/MESSAGE_ID
Authorization: Bearer {{accessToken}}

### 20. Contacts - Get All
GET {{baseUrl}}/contacts/
Authorization: Bearer {{accessToken}}

### 21. Contacts - Sync from WhatsApp
POST {{baseUrl}}/contacts/sync
Authorization: Bearer {{accessToken}}

### 22. Contacts - Get Contact Details
GET {{baseUrl}}/contacts/1234567890@s.whatsapp.net
Authorization: Bearer {{accessToken}}

### 23. Contacts - Update Contact
PUT {{baseUrl}}/contacts/1234567890@s.whatsapp.net
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Updated Contact Name"
}

### 24. Contacts - Block Contact
POST {{baseUrl}}/contacts/1234567890@s.whatsapp.net/block
Authorization: Bearer {{accessToken}}

### 25. Contacts - Unblock Contact
POST {{baseUrl}}/contacts/1234567890@s.whatsapp.net/unblock
Authorization: Bearer {{accessToken}}

### 26. Contacts - Check if Exists
GET {{baseUrl}}/contacts/1234567890@s.whatsapp.net/check?phoneNumber=1234567890
Authorization: Bearer {{accessToken}}

### 27. Groups - Get All
GET {{baseUrl}}/groups/
Authorization: Bearer {{accessToken}}

### 28. Groups - Create Group
POST {{baseUrl}}/groups/create
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Test Group",
  "participants": ["1234567890@s.whatsapp.net"],
  "description": "Test group created via API"
}

### 29. Groups - Get Group Details
GET {{baseUrl}}/groups/GROUP_JID
Authorization: Bearer {{accessToken}}

### 30. Groups - Update Group Settings
PUT {{baseUrl}}/groups/GROUP_JID
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "description": "Updated description"
}

### 31. Groups - Add Participants
POST {{baseUrl}}/groups/GROUP_JID/participants
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "action": "add",
  "participants": ["1234567890@s.whatsapp.net"]
}

### 32. Groups - Remove Participants
POST {{baseUrl}}/groups/GROUP_JID/participants
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "action": "remove",
  "participants": ["1234567890@s.whatsapp.net"]
}

### 33. Groups - Promote to Admin
PUT {{baseUrl}}/groups/GROUP_JID/participants/1234567890@s.whatsapp.net/promote
Authorization: Bearer {{accessToken}}

### 34. Groups - Demote from Admin
PUT {{baseUrl}}/groups/GROUP_JID/participants/1234567890@s.whatsapp.net/demote
Authorization: Bearer {{accessToken}}

### 35. Groups - Get Invite Code
GET {{baseUrl}}/groups/GROUP_JID/invite-code
Authorization: Bearer {{accessToken}}

### 36. Groups - Revoke Invite Code
POST {{baseUrl}}/groups/GROUP_JID/revoke-code
Authorization: Bearer {{accessToken}}

### 37. Groups - Join via Invite Code
POST {{baseUrl}}/groups/join/INVITE_CODE
Authorization: Bearer {{accessToken}}

### 38. Groups - Leave Group
DELETE {{baseUrl}}/groups/GROUP_JID/leave
Authorization: Bearer {{accessToken}}

### 39. Media - Upload (requires file)
# POST {{baseUrl}}/media/upload
# Authorization: Bearer {{accessToken}}
# Content-Type: multipart/form-data; boundary=boundary
# (Use Postman or cURL for file uploads)

### 40. Media - Get by Message ID
GET {{baseUrl}}/media/MESSAGE_ID
Authorization: Bearer {{accessToken}}

### 41. Media - Delete Media
DELETE {{baseUrl}}/media/MEDIA_ID
Authorization: Bearer {{accessToken}}

### 42. Refresh Token
POST {{baseUrl}}/auth/refresh-token
Content-Type: application/json

{
  "refreshToken": "YOUR_REFRESH_TOKEN"
}

### 43. Logout
POST {{baseUrl}}/auth/logout
Authorization: Bearer {{accessToken}}
